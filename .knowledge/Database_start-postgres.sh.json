{"is_source_file": true, "format": "bash", "description": "A startup script for initializing, configuring, and starting a PostgreSQL database server, including setting up roles, database, configuration files, and performing health checks.", "external_files": ["run-postgres-docker.sh"], "external_methods": ["command -v", "[ -d /usr/lib/postgresql ]", "[ -f \"${PGDATA_DIR}/PG_VERSION\" ]", "grep -q", "sudo -u postgres \"...\"", "ls", "sort -Vr", "head -1", "command -v postgres", "dirname", "cat", "echo", "sleep", "exit", "mkdir", "chown", "psql", "createdb"], "published": [], "classes": [], "methods": [], "calls": ["detect_pg_bin", "command -v postgres", "ls", "sort -Vr", "head -1", "grep -q \"^port *= *${DB_PORT}\" \"${PGCONF}\"", "grep -q \"^host *all *all *0.0.0.0/0 *md5\" \"${PGHBA}\"", "sudo -u postgres \"${PG_ISREADY}\" -p \"${DB_PORT}\"", "sudo -u postgres \"${PG_CTL}\" -D \"${PGDATA_DIR}\" -l \"${PGLOG_DIR}/postgresql.log\" start", "sudo -u postgres \"${PSQL}\" -p \"${DB_PORT}\" -d postgres -tAc \"SELECT 1 FROM pg_roles WHERE rolname='${DB_USER}'\"", "grep -q 1", "sudo -u postgres \"${CREATEDB}\" -p \"${DB_PORT}\" -O \"${DB_USER}\" \"${DB_NAME}\"", "sudo -u postgres \"${PSQL}\" -p \"${DB_PORT}\" -d postgres -tAc \"SELECT 1 FROM pg_database WHERE datname='${DB_NAME}'\"", "sed", "cat", "psql", "exit"], "search-terms": ["start-postgres", "PostgreSQL startup script", "initialize database", "configure listen addresses", "health checks PostgreSQL", "docker fallback PostgreSQL", "detect system PostgreSQL"], "state": 2, "file_id": 8, "knowledge_revision": 27, "git_revision": "8eb91ea0de6ef5c262e69f97c13a6a1a62961e2b", "revision_history": [{"17": ""}, {"27": "8eb91ea0de6ef5c262e69f97c13a6a1a62961e2b"}], "hash": "a3f3564bcbd95f3338187df34957b0ae", "format-version": 4, "code-base-name": "Database", "filename": "Database/start-postgres.sh"}